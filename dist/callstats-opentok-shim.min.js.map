{"version":3,"sources":["callstats-opentok-shim-es5.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","Object","TypeError","CallstatsOpenTok","isPCTPc","pcConfig","iceServers","len","username","includes","isShortCall","constraints","reportError","pc","fnName","callstatsConn","webRtcFunc","webRTCFunctions","sessionId","wrapError","failure","getConnections","copy","Map","connections","forEach","v","k","set","idGenerator","d","Date","getTime","replace","c","r","Math","random","toString","onConnection","connId","remoteId","fabricEvents","audioMute","audioUnmute","videoPause","videoResume","screenShareStart","screenShareStop","dominantSpeaker","origPeerConnection","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","newPeerConnection","config","uuid","remoteUuid","kind","capableSimulcastStreams","peerConnection","usage","fabricUsage","multiplex","addNewFabric","msg","console","log","warn","origGetStats","getStats","bind","_len","arguments","args","_key","apply","catch","ex","success","res","origCreateOffer","createOffer","_len2","_key2","_constraints","failureWrap","origCreateAnswer","createAnswer","_len3","_key3","_constraints2","origSetLocalDescription","setLocalDescription","_len4","_key4","sdp","addEventListener","signalingState","delete","obj","hasOwnProperty","keys","x","prototype","initialize","params","statsCallback","initCallback","configParams","IdGenerator","AppId","AppSecret","SessionId","OnConnection","Id","info","RemoteId","InitCallback","StatsCallback","ConfigParams","callstats","error","sendUserFeedback","feedback","sendFabricEvent","eventName","fabrics","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_ref","_ref2","iceConnectionState","return","sendLogs","domError","applicationError"],"mappings":"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","file":"callstats-opentok-shim.min.js"}